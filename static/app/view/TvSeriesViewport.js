/*
 * File: app/view/TvSeriesViewport.js
 * Date: Sun Sep 11 2011 23:29:53 GMT+0200 (CEST)
 *
 * This file was generated by Ext Designer version 1.2.0.
 * http://www.sencha.com/products/designer/
 *
 * This file will be generated the first time you export.
 *
 * You should implement event handling and custom methods in this
 * class.
 */

Ext.define('TvSeries.view.TvSeriesViewport', {
	extend: 'TvSeries.view.ui.TvSeriesViewport',

	showWindow: null,

	initComponent: function() {
		this.callParent(arguments);
        
		this.showWindow = Ext.create('TvSeries.view.ShowWindow', {
			renderTo: Ext.getBody()
		});
		this.showWindow.on('hide',  this.reloadEpisodesGrid, this);
		
		this.down("SerialsGrid").on("loadSeason", this.loadSeason, this);
		this.down("SeasonsGrid").on("loadEpisode", this.loadEpisode, this);
		this.down("EpisodesGrid").on("loadShowWindow", this.loadShowWindow, this);
	},
    
	loadSeason: function(record){
		this.down("SeasonsGrid").load(record);
	},
	
	loadEpisode: function(record){
		this.down("EpisodesGrid").load(record);
	},
	
	loadShowWindow: function(episode, season, serial){
		this.showWindow.loadVideo(episode, season, serial, this.down("EpisodeGrid"));
	},
	
	reloadEpisodesGrid: function(){
		this.down("EpisodesGrid").reload();
	}
});