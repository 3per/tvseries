/*
 * File: app/view/AddSingleEpisodeWindow.js
 *
 * This file was generated by Ext Designer version 1.2.2.
 * http://www.sencha.com/products/designer/
 *
 * This file will be generated the first time you export.
 *
 * You should implement event handling and custom methods in this
 * class.
 */

Ext.define('TvSeries.view.AddSingleEpisodeWindow', {
	extend: 'TvSeries.view.ui.AddSingleEpisodeWindow',

	initComponent: function() {
		var me = this;
		me.callParent(arguments);
		
		this.down("#saveButton").on("click", this.save, this);
		this.down("#serialCombobox2").setValue(this.serial.get('id'));
		this.down("#seasonCombobox2").setValue(this.season.get('id'));
	},
	
	save: function(){
		this.down("form").getForm().submit({
			params: {
				action: "updateoraddSingle",
				idSeason: this.season.get('id')
			},
			success: function(form, action) {
				Ext.Msg.alert('Erfolgreich gespeichert', "Ã„nderungen erfolgreich gespeichert.<br />" + action.result.msg);
				this.close();
			},
			failure: function(form, action) {
				Ext.Msg.alert('Es ist ein Fehler aufgetreten', action.result.msg);
			},
			scope: this
		});
	}
});